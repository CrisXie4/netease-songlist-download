# 网易云音乐歌单下载器

一个简单易用的网易云音乐歌单批量下载工具，支持通过歌单ID下载整个歌单或选择性下载歌曲。

## 功能特点

### 核心功能
- **歌单批量下载** - 输入歌单ID即可获取完整歌单信息
- **灵活选择下载** - 支持下载全部歌曲或自定义选择特定歌曲
- **智能解析** - 支持多种选择方式：
  - 单个歌曲：`3`
  - 多个歌曲：`1,3,5`
  - 连续范围：`1-5`
  - 混合使用：`1,3-5,8`
- **友好界面** - 清晰的歌曲列表展示，包含歌曲名称和艺术家信息
- **下载状态提示** - 实时显示下载进度和成功/失败状态

### 技术特点
- **跨平台支持** - 支持 Windows/Linux/macOS
- **UTF-8编码处理** - 完美支持中文歌曲名称
- **错误处理** - 完善的异常处理机制，单个歌曲下载失败不影响其他歌曲
- **文件名安全** - 自动清理文件名中的非法字符
- **流式下载** - 分块下载，节省内存占用
- **超时控制** - 设置合理的超时时间，避免长时间等待

## 环境要求

- Python 3.6 或更高版本
- requests 库

## 安装步骤

### 1. 克隆或下载项目

```bash
git clone <repository-url>
cd wangyiyun
```

### 2. 安装依赖

```bash
pip install requests
```

或使用国内镜像加速：

```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple requests
```

## 使用方法

### 方式一：运行 Python 脚本

```bash
python app.py
```

### 方式二：运行打包的可执行文件（Windows）

直接双击 `dist/app.exe` 运行（如果已打包）

## 使用示例

1. **启动程序**
   ```
   python app.py
   ```

2. **输入歌单ID**
   ```
   请输入歌单ID：8573978794
   ```
   > 提示：歌单ID可以从网易云音乐网页版歌单链接中获取
   > 例如：https://music.163.com/#/playlist?id=8573978794

3. **查看歌曲列表**
   ```
   ================================================================================
   歌曲列表：
   ================================================================================
     1. 花伞 - 亞細亞曠世奇才, 诺米么Lodmemo
     2. 靶向药 - 亞細亞曠世奇才
     3. 冰下鱼 - 亞細亞曠世奇才
   ...
   ================================================================================
   ```

4. **选择下载方式**
   ```
   选择下载方式：
   1. 下载全部歌曲
   2. 选择特定歌曲下载

   请选择 (1/2): 2
   ```

5. **输入要下载的歌曲序号**
   ```
   请输入要下载的歌曲序号：
   提示：
     - 单个歌曲：输入序号，如 "3"
     - 多个歌曲：用逗号分隔，如 "1,3,5"
     - 连续范围：用短横线连接，如 "1-5"
     - 混合使用：如 "1,3-5,8"

   请输入: 1-3,5
   ```

6. **确认下载**
   ```
   将要下载 4 首歌曲
   确认开始下载？(y/n): y
   ```

7. **等待下载完成**
   ```
   [1/4] 花伞 - 亞細亞曠世奇才, 诺米么Lodmemo
   正在获取音频链接: 花伞 - 亞細亞曠世奇才, 诺米么Lodmemo...
   正在下载音频: 花伞 - 亞細亞曠世奇才, 诺米么Lodmemo...
   ✓ 下载成功: 花伞 - 亞細亞曠世奇才, 诺米么Lodmemo

   下载完成！成功: 4/4
   ```

## 下载文件位置

所有下载的音乐文件保存在项目根目录下的 `music` 文件夹中，文件格式为 MP3。

## 打包为可执行文件

如果需要打包成独立的可执行文件，可以使用 PyInstaller：

### 1. 安装 PyInstaller

```bash
pip install pyinstaller
```

### 2. 打包程序

```bash
pyinstaller app.spec
```

打包完成后，可执行文件位于 `dist/app.exe`（Windows）或 `dist/app`（Linux/macOS）

## 常见问题

### 1. 下载失败怎么办？
- 检查网络连接是否正常
- 确认歌单ID是否正确
- 部分歌曲可能因版权问题无法下载

### 2. 文件名出现乱码？
- 程序已内置UTF-8编码处理，如果仍有问题，请检查系统编码设置

### 3. 如何获取歌单ID？
- 打开网易云音乐网页版
- 进入想要下载的歌单页面
- 从URL中复制ID数字部分
- 例如：`https://music.163.com/#/playlist?id=8573978794` 中的 `8573978794`

## 注意事项

- 本工具仅供个人学习交流使用
- 请尊重音乐版权，支持正版音乐
- 下载的音乐文件仅供个人欣赏，请勿用于商业用途
- 使用过程中请遵守相关法律法规

## 技术说明

### 依赖的API
- 歌单详情API：`https://www.oiapi.net/api/NeteasePlaylistDetail`
- 音频下载API：`https://api.paugram.com/netease`

### 主要功能模块
- `get_playlist_detail()` - 获取歌单详情
- `download_song()` - 下载单首歌曲
- `display_songs()` - 显示歌曲列表
- `get_user_selection()` - 处理用户选择逻辑
- `main()` - 主程序流程控制

## License

本项目仅供学习交流使用。

## 更新日志

### v1.0
- 实现基本的歌单下载功能
- 支持选择性下载歌曲
- 添加下载进度显示
- 完善错误处理机制
